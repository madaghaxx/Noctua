<div class="home-container">
  <mat-toolbar class="toolbar volt-glow">
    <button mat-icon-button [matMenuTriggerFor]="menu">
      <mat-icon>menu</mat-icon>
    </button>

    <span class="logo gold-accent">Noctua</span>
    <span class="spacer"></span>

    @if (currentUser) {
    <app-notification-bell></app-notification-bell>

    <button mat-icon-button [matMenuTriggerFor]="userMenu">
      <mat-icon>account_circle</mat-icon>
    </button>
    }
  </mat-toolbar>

  <mat-menu #menu="matMenu">
    <button mat-menu-item routerLink="/home">
      <mat-icon>home</mat-icon>
      Home
    </button>
    <button mat-menu-item routerLink="/discover">
      <mat-icon>search</mat-icon>
      Discover Users
    </button>
    <button mat-menu-item (click)="goToProfile()">
      <mat-icon>person</mat-icon>
      Profile
    </button>
    <button mat-menu-item (click)="goToSubscriptions()">
      <mat-icon>people</mat-icon>
      Subscriptions
    </button>
  </mat-menu>

  <mat-menu #userMenu="matMenu">
    <div class="user-menu-header">
      <span class="username gold-accent">{{ currentUser?.username }}</span>
      <span class="email">{{ currentUser?.email }}</span>
    </div>
    <mat-divider></mat-divider>
    <button mat-menu-item (click)="goToProfile()">
      <mat-icon>person</mat-icon>
      My Profile
    </button>
    @if (isAdmin()) {
    <button mat-menu-item routerLink="/admin">
      <mat-icon>admin_panel_settings</mat-icon>
      Admin Dashboard
    </button>
    }
    <button mat-menu-item (click)="logout()">
      <mat-icon>exit_to_app</mat-icon>
      Logout
    </button>
  </mat-menu>

  <div class="content">
    <div style="display: flex; justify-content: center">
      <div style="flex: 0 0 70%; max-width: 70%; min-width: 340px">
        @if (isAdmin()) {
        <button mat-raised-button color="accent" routerLink="/admin" style="margin: 16px 0 0 16px">
          <mat-icon>admin_panel_settings</mat-icon>
          Admin Panel
        </button>
        }
        <app-post-feed></app-post-feed>
      </div>
    </div>
  </div>
</div>
